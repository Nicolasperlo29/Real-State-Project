<div class="property-detail-container">
    <div class="property-detail-wrapper">
        <!-- Carrusel de imágenes -->
        <div class="image-carousel">
            <div class="carousel-container">
                @if (property.images.length > 0) {
                <img [src]="property.images[currentImage].url" [alt]="property.title" class="carousel-image" />

                <!-- Status y favorito -->
                <div class="carousel-actions">
                    <span class="property-status">
                        {{ property.status }}
                    </span>
                    <button (click)="isFavorite = !isFavorite" class="favorite-btn">
                        <i class="fa-solid fa-heart"
                            [ngClass]="isFavorite ? 'favorite-active' : 'favorite-inactive'"></i>
                    </button>
                </div>

                <!-- Botones anterior / siguiente -->
                <button (click)="prevImage()" class="carousel-btn carousel-btn-prev">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <button (click)="nextImage()" class="carousel-btn carousel-btn-next">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
                }
                @if (property.images.length == 0) {
                <div class="no-images">
                    <i class="fa-solid fa-image no-images-icon"></i>
                    <p class="no-images-text">No hay imágenes disponibles</p>
                </div>
                }
            </div>
        </div>

        <div class="content-grid">
            <!-- Descripción -->
            <div class="main-content">
                <div class="info-card">
                    <div class="property-header">
                        <div>
                            <h1 class="property-title">{{ property.title }}</h1>
                            <div class="property-location">
                                <i class="fa-solid fa-map-pin"></i>
                                <span>{{ property.address }}, {{ property.city }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="property-price">
                        {{ formatPrice(property.price) }}
                    </div>

                    <div class="features-grid">
                        <div class="feature-card feature-card-emerald">
                            <i class="fa-solid fa-dollar-sign feature-icon"></i>
                            <div class="feature-value">{{ property.areaCubierta }}m²</div>
                            <div class="feature-label">Construido</div>
                        </div>
                        <div class="feature-card feature-card-blue">
                            <i class="fa-solid fa-maximize feature-icon"></i>
                            <div class="feature-value">{{ property.areaTotal }}m²</div>
                            <div class="feature-label">Superficie</div>
                        </div>
                        <div class="feature-card feature-card-purple">
                            <i class="fa-solid fa-bed feature-icon"></i>
                            <div class="feature-value">{{ property.rooms }}</div>
                            <div class="feature-label">Habitaciones</div>
                        </div>
                        <div class="feature-card feature-card-purple">
                            <i class="fa-solid fa-bath feature-icon"></i>
                            <div class="feature-value">{{ property.bathrooms }}</div>
                            <div class="feature-label">Baños</div>
                        </div>
                    </div>

                    <div class="description-section">
                        <h2 class="section-title">Descripción</h2>
                        <p class="description-text">{{ property.description }}</p>
                    </div>
                </div>

                <!-- Mapa -->
                <div class="map-card">
                    <h2 class="section-title">Ubicación</h2>
                    <div class="map-placeholder">
                        <i class="fa-solid fa-map-location-dot map-icon"></i>
                        <p class="map-text">Mapa interactivo</p>
                        <p class="map-coordinates">
                            {{ property.latitude }}, {{ property.longitude }}
                        </p>
                    </div>
                </div>
            </div>

            <!-- Formulario de contacto -->
            <div class="sidebar">
                <div class="contact-card">
                    <h3 class="contact-title">Contactar al vendedor</h3>
                    <form (ngSubmit)="handleSubmit()" #contactForm="ngForm" class="contact-form">
                        <div class="form-group">
                            <label class="form-label">Nombre</label>
                            <input type="text" [(ngModel)]="contactData.name" name="name" class="form-input"
                                placeholder="Tu nombre" />
                        </div>

                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" [(ngModel)]="contactData.email" name="email" class="form-input"
                                placeholder="tu@email.com" />
                        </div>

                        <div class="form-group">
                            <label class="form-label">Teléfono</label>
                            <input type="tel" [(ngModel)]="contactData.phone" name="phone" class="form-input"
                                placeholder="+54 9 11 1234-5678" />
                        </div>

                        <div class="form-group">
                            <label class="form-label">Mensaje</label>
                            <textarea rows="4" [(ngModel)]="contactData.message" name="message" class="form-textarea"
                                placeholder="Me interesa esta propiedad..."></textarea>
                        </div>

                        <button type="submit" class="submit-btn">
                            <i class="fa-solid fa-paper-plane"></i>
                            Enviar consulta
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>