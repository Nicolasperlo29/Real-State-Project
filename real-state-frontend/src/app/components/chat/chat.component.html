<div class="chat-layout">
  <!-- Sidebar de usuarios -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h3>Conversaciones</h3>
      <span class="user-count">{{ usuarios.length }} usuarios</span>
    </div>
    
    <div class="usuarios-list">
      <div *ngFor="let user of usuarios" 
           (click)="seleccionar(user)" 
           class="usuario-item"
           [class.active]="user.id === receiverId">
        <div class="usuario-avatar">
          {{ user.fullName.charAt(0).toUpperCase() }}
        </div>
        <div class="usuario-info">
          <div class="usuario-name">{{ user.fullName }}</div>
          <div class="usuario-status">En l√≠nea</div>
        </div>
      </div>
    </div>
  </div>

  <!-- √Årea de chat -->
  <div class="chat-main">
    <div *ngIf="!receiverId" class="empty-state">
      <div class="empty-icon">üí¨</div>
      <h3>Selecciona una conversaci√≥n</h3>
      <p>Elige un usuario de la lista para comenzar a chatear</p>
    </div>

    <div *ngIf="receiverId" class="chat-active">
      <!-- Header del chat -->
      <div class="chat-header">
        <div class="chat-user-info">
          <div class="chat-avatar">
            {{ selectedUser?.fullName?.charAt(0)?.toUpperCase() }}
          </div>
          <div>
            <h3>{{ selectedUser?.fullName }}</h3>
            <span class="status-badge">En l√≠nea</span>
          </div>
        </div>
      </div>

      <!-- Mensajes -->
      <div class="chat-messages" #chatBox>
        <div *ngFor="let msg of filteredMessages" 
             class="message-wrapper"
             [class.mine]="msg.senderId === messageService.getUserId()">
          <div class="message-bubble">
            <div class="message-content">{{ msg.content }}</div>
            <div class="message-time">{{ getMessageTime(msg.sentAt) }}</div>
          </div>
        </div>
      </div>

      <!-- Input de mensaje -->
      <div class="chat-input-area">
        <div class="input-container">
          <input 
            type="text" 
            [(ngModel)]="newMessage" 
            placeholder="Escribe un mensaje..." 
            (keyup.enter)="send()"
            class="message-input" />
          <button 
            (click)="send()" 
            [disabled]="!newMessage.trim()"
            class="send-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>